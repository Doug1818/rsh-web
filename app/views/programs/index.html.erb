<div class="container">
  <div class="well">
    <div class="row">
      <% if current_coach %>
      <div class="col-md-9">
        <h1>Active Clients (<%= @programs.size %>)</h1>
      </div>
      <div class="col-md-3">
         <%= link_to 'Back to Dashboard', coach_path(current_coach), class: 'btn btn-primary add-patient' %>
      </div>
      <% elsif current_admin %>
        <div class="col-md-12">
          <h1>Active Clients (<%= @programs.size %>)</h1>
        </div>
      <% end %>
    </div>
    <div class="row">
      <div class="col-md-12">
        <% if @programs.present? %>
          <table class="table table-striped table-hover">
            <thead>
              <% if current_coach %>
                <tr>
                  <th>Created</th>
                  <th>Client</th>
                  <th>Purpose</th>
                  <th></th>
                </tr>
              <% elsif current_admin %>
                <tr>
                  <!-- <th>Practice</th> -->
                  <th>Coach</th>
                  <th>Client</th>
                  <th>Client Email</th>
                  <th>Start Date</th>
                  <th></th>
                </tr>
              <% end %>
            </thead>

            <tbody>
              <% if current_coach %>
                <% @programs.each do |program| %>
                  <tr>
                    <td><%= program.created_at.strftime("%m/%d/%y") %></td>
                    <td><%= link_to program.user.full_name, program_path(program) %></td>
                    <td><%= program.purpose %></td>
                    <td>
                      <!-- <%= link_to 'edit', edit_program_path(program) %> | -->
                      <%= link_to 'delete', program, data: { confirm: "Are you sure?" }, method: :delete %>
                    </td>
                  </tr>
                <% end %>
              <% elsif current_admin %>
                <% @programs.each do |program| %>
                  <% user = program.user %>
                  <% current_coach ? coach = current_coach : coach = program.coaches.first %>
                  <% practice = Practice.find(coach.practice_id) %>
                  <tr>
                    <!-- <td><%= practice.name %></td> -->
                    <td><%= coach.full_name %></td>
                    <td><%= user.full_name %></td>
                    <td><%= user.email %></td>
                    <td><%= program.start_date %></td>
                    <td><%= link_to 'view', program_path(program) %></td>
                  </tr>
                <% end %>
              <% end %>
            </tbody>
          </table>

          <%#= paginate @users %>
        <% else %>
          <br/>
          <p>No programs have been created yet.</p>
          <br/>
        <% end %>
      </div>
    </div>
  </div>
</div>

