<div class="container">
  <div class="row">
    <div class="col-md-4">
      <div class="pull-right">
        <%= image_tag(@program.user.avatar.large.url) %>
      </div>
    </div>
    <div class="col-md-8">
      <h2><%= @program.user.full_name %></h2>
      <p>I am here to <%= @program.purpose.downcase %> so I can <%= @program.goal.downcase %></p>
      <hr/>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <ul class="list-inline view">
        <li>View:</li>
        <li class="<%= 'active' if @active == 'steps' %>"><a href="#steps" data-toggle="tab">Steps</a></li>
        <li class="<%= 'active' if @active == 'advanced-settings' %>"><a href="#advanced-settings" data-toggle="tab">Advanced Settings</a></li>
      </ul>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12 tab-content">

      <!-- this area needs to be scrollable -->

      <div class="tab-pane scrollable <%= 'active' if @active == 'steps' %>" id="steps">

        <%= render @weeks %>

        <div class="new-week">
          <%= link_to "<span class='btn-plus'></span>".html_safe, weeks_path(program_id: @program.id), method: :post %>
        </div>
      </div>


      <div class="tab-pane <%= 'active' if @active == 'advanced-settings' %>" id="advanced-settings">
        <div class="well">
          <h2>My Alerts</h2>
          <%= render @alerts %>
          <%= link_to "<span class='btn-plus'></span>".html_safe, "#", class: 'new-alert-link' %>

          <div class="alerts">
            <div class="form">
              <%= render partial: 'alerts/form', locals: { alert: Alert.new(program: @program) } %>
            </div>
          </div>
          <div class="clearfix"></div>
        </div>
        
        <div class="well">
          <h2>User Reminders</h2>
          <% if @reminders.present? %>
          <table width="1000">
            <tr>
              <th>Frequency</th>
              <th>Date/Starting</th>
              <th>Time</th>
              <th>Message</th>
            </tr>
            <%= render @reminders %>
          </table>
          <% end %>
          <%= link_to "<span class='btn-plus'></span>".html_safe, "#", class: 'new-reminder-link' %>

          <div class="reminder">
            <div class="form">
              <%= render partial: 'reminders/form', locals: { reminder: Reminder.new(program: @program) } %>
            </div>
          </div>
          <div class="clearfix"></div>
        </div>

        <% if false # Currently not in use, but may be in the future %>
        <div class="well">
          <h2>Accountability Tools</h2>
          <%= render @supporters %>
          <%= link_to "<span class='btn-plus'></span>".html_safe, new_supporter_path(program_id: @program.id) %>
        </div>

        <div class="well">
          <h2>To Dos</h2>
          <%= render @todos %>
          <%= link_to "<span class='btn-plus'></span>".html_safe, new_todo_path(program_id: @program.id) %>
        </div>
      </div>
      <% end %>

      <!-- end scrollable area -->

    </div>
  </div>
</div>
